 <style>
    /* Base Body Adjustment */
    body {
        margin: 0;
        padding-bottom: 80px;
        min-height: 100vh;
        box-sizing: border-box;
    }

    /* Container positioning */
    .profile-menu-container, .setup-menu-container {
        position: relative;
        list-style: none;        
    } 

    /* Modal Styling - Shared for all */
    .profile-modal, .payment-modal {
        display: none;
        position: absolute;
        bottom: 70px; /* Fixed height for consistent look */
        width: 220px;
        background: #241d55e5;
        border-radius: 12px;
        box-shadow: 
            0 8px 15px rgba(168, 132, 132, 0.2),
            0 15px 30px rgba(73, 50, 50, 0.25),
            0 25px 40px rgba(0,0,0,0.35);
        z-index: 1000;
        overflow: hidden;
        animation: slideUp 0.3s ease;
    }
     .setup-modal {
        display: none;
        position: absolute;
        bottom: 70px; /* Fixed height for consistent look */
        width: 220px;
        background: #241d55e5;
        border-radius: 12px;
        box-shadow: 
            0 8px 15px rgba(168, 132, 132, 0.2),
            0 15px 30px rgba(73, 50, 50, 0.25),
            0 25px 40px rgba(0,0,0,0.35);
        z-index: 1000;
        overflow: hidden;
        animation: slideUp 0.3s ease;
    }


    /* Specific Alignments */
    .profile-modal { right: 0px; } 
    .payment-modal { left: 0%; }  

    @keyframes slideUp {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .modal-body { padding: 10px; }

    .modal-btn {
        display: flex;
        align-items: center; /* Adjusted for better alignment */
        gap: 12px;
        padding: 10px 15px;
        text-decoration: none;
        color: #ffffff; /* Consistent white text */
        font-size: 14px;
        border-radius: 8px;
        transition: 0.2s;
    }

    .modal-btn:hover {
        background: rgba(255, 255, 255, 0.1);
        color: #ffd700;
    }

    .modal-btn i { width: 16px; text-align: center; }

    .logout-btn { color: #ff4d4d !important; }
    .logout-btn:hover { background: rgba(255, 77, 77, 0.1) !important; color: #ff4d4d !important; }

    hr { border: 0; border-top: 1px solid rgba(255, 255, 255, 0.1); margin: 8px 0; }

    /* --- Glossy Bottom Navbar --- */
    .navbar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background: rgba(7, 0, 0, 0.686);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        padding: 12px 0;
        z-index: 2000;
        box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.2);
    }

    .nav-links {
        list-style: none;
        display: flex;
        justify-content: space-around;
        align-items: center;
        max-width: 600px;
        margin: 0 auto;
        padding: 0;
    }

    .nav-links li { flex: 1; text-align: center; }

    .nav-links li a {
        text-decoration: none;
        color: rgba(255, 255, 255, 0.8);
        font-size: 12px;
        font-weight: 500;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
        transition: all 0.3s ease;
    }

    .nav-icon { font-size: 22px; margin-bottom: 2px; }

    .nav-links li a:hover { color: #ffd700; transform: translateY(-5px); }

    @media (max-width: 480px) {
        .nav-links li a { font-size: 11px; }
        .nav-icon { font-size: 20px; }
        .payment-modal { left: -30px; width: 200px; }  
        .setup-modal { left: -60px; width: 190px; }  
    }
</style>

<nav class="navbar">
    <ul class="nav-links">
        <li>
            <a href="/dashboard">
                <span class="nav-icon"><i class="fas fa-th-large"></i></span>
                <span>Dashboard</span>
            </a>
        </li>

        <% if (user && user.roleId == 2) { %>
            <li>
                <a href="/payment">
                    <span class="nav-icon"><i class="fas fa-credit-card"></i></span>
                    <span>Payment</span>
                </a>
            </li>
            <li class="profile-menu-container">
                <a href="javascript:void(0)" id="profileMenuBtn">
                    <span class="nav-icon"><i class="fas fa-user-circle"></i></span>
                    <span>Profile</span>
                </a>
                <div id="profileModal" class="profile-modal">
                    <div class="modal-body">
                        <a href="/profile/personal-info" class="modal-btn">
                            <i class="fas fa-id-card"></i> Personal Info
                        </a>
                        <a href="/change-password" class="modal-btn">
                            <i class="fas fa-key"></i> Change Password
                        </a>
                        <hr>
                        <a href="/logout" class="modal-btn logout-btn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </a>
                    </div>
                </div>
            </li>
        <% } %>

        <% if (user && user.roleId == 1) { %>
            <li class="profile-menu-container">
                <a href="javascript:void(0)" id="paymentMenuBtn">
                    <span class="nav-icon"><i class="fas fa-file-invoice-dollar"></i></span>
                    <span>Payment</span>
                </a>
                <div id="paymentModal" class="payment-modal">
                    <div class="modal-body">
                        <a href="/payment" class="modal-btn">
                            <i class="fas fa-hand-holding-usd"></i> Payment Request
                        </a>
                        <a href="/payment-approved" class="modal-btn">
                            <i class="fas fa-file-signature"></i> Payment Approved
                        </a>
                    </div>
                </div>
            </li>

            <li class="setup-menu-container">
                <a href="javascript:void(0)" id="setupMenuBtn">
                    <span class="nav-icon"><i class="fas fa-gear"></i></span>
                    <span>Setup</span>
                </a>
                <div id="setupModal" class="setup-modal">
                    <div class="modal-body">
                        <a href="/users" class="modal-btn">
                            <i class="fas fa-user-plus"></i> New Users
                        </a>
                        <a href="/period" class="modal-btn">
                            <i class="fas fa-calendar-check"></i> Period
                        </a>
                        <a href="/shere_member" class="modal-btn">
                            <i class="fas fa-users"></i> Share Member
                        </a>
                        <hr>
                        <a href="/logout" class="modal-btn logout-btn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </a>
                    </div>
                </div>
            </li> 
            
        <% } %>
    </ul>
</nav>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const profileBtn = document.getElementById('profileMenuBtn');
        const profileModal = document.getElementById('profileModal');
        const setupBtn = document.getElementById('setupMenuBtn');
        const setupModal = document.getElementById('setupModal');
        const paymentBtn = document.getElementById('paymentMenuBtn');
        const paymentModal = document.getElementById('paymentModal');

        // Combined close function
        function closeAll() {
            if (profileModal) profileModal.style.display = 'none';
            if (setupModal) setupModal.style.display = 'none';
            if (paymentModal) paymentModal.style.display = 'none';
        }

        // Handle Profile Click
        if (profileBtn && profileModal) {
            profileBtn.addEventListener('click', function (e) {
                e.stopPropagation();
                const isOpen = profileModal.style.display === 'block';
                closeAll();
                profileModal.style.display = isOpen ? 'none' : 'block';
            });
        }

        // Handle Setup Click
        if (setupBtn && setupModal) {
            setupBtn.addEventListener('click', function (e) {
                e.stopPropagation();
                const isOpen = setupModal.style.display === 'block';
                closeAll();
                setupModal.style.display = isOpen ? 'none' : 'block';
            });
        }

        // Handle Payment Click
        if (paymentBtn && paymentModal) {
            paymentBtn.addEventListener('click', function (e) {
                e.stopPropagation();
                const isOpen = paymentModal.style.display === 'block';
                closeAll();
                paymentModal.style.display = isOpen ? 'none' : 'block';
            });
        }

        // Prevent closing when clicking inside any modal content
        [profileModal, setupModal, paymentModal].forEach(modal => {
            if (modal) {
                modal.addEventListener('click', function (e) {
                    e.stopPropagation();
                });
            }
        });

        // Close on outside click
        document.addEventListener('click', function () {
            closeAll();
        });
    });
</script>